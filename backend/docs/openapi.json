{
  "openapi": "3.1.0",
  "info": {
    "title": "Life Canvas OS API",
    "description": "\n# Life Canvas OS 后端 API\n\n八维生命平衡系统后端接口，支持个人成长管理、日记记录、AI 洞察等功能。\n\n## 主要功能\n\n- **用户认证**: PIN 码设置、验证、修改\n- **系统管理**: 八维系统（饮食、运动、智力、输出、恢复、资产、连接、环境）\n- **用户配置**: 用户信息、设置、AI 配置\n- **日记管理**: 日记 CRUD、附件、编辑历史\n- **AI 洞察**: 基于用户数据生成个性化洞察\n- **数据管理**: 备份、恢复、导出、导入\n\n## 认证方式\n\n本 API 使用 PIN 码认证。\n\n## 响应格式\n\n所有接口遵循统一的响应格式：\n\n```json\n{\n  \"code\": 200,\n  \"message\": \"success\",\n  \"data\": {},\n  \"timestamp\": 1707219200000\n}\n```\n\n## 错误码\n\n- `200`: 成功\n- `201`: 创建成功\n- `400`: 错误请求\n- `401`: 未授权\n- `404`: 资源不存在\n- `409`: 冲突\n- `422`: 参数验证失败\n- `429`: 请求过于频繁\n- `500`: 服务器错误\n\n## 分页参数\n\n| 参数 | 类型 | 必填 | 默认值 | 说明 |\n|------|------|------|--------|------|\n| page | Integer | 否 | 1 | 页码，从 1 开始 |\n| page_size | Integer | 否 | 20 | 每页数量，最大 100 |\n| sort_by | String | 否 | created_at | 排序字段 |\n| sort_order | String | 否 | desc | 排序方向：asc/desc |\n",
    "version": "1.0.0"
  },
  "paths": {
    "/": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Root",
        "description": "根路径健康检查",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/ping": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Ping",
        "description": "Ping 检查",
        "operationId": "ping_ping_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/pin/setup": {
      "post": {
        "tags": [
          "authentication",
          "authentication"
        ],
        "summary": "Setup Pin",
        "description": "设置 PIN 码（首次）\n\n验证规则：6 位数字",
        "operationId": "setup_pin_api_pin_setup_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PinSetupRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/pin/verify": {
      "post": {
        "tags": [
          "authentication",
          "authentication"
        ],
        "summary": "Verify Pin Code",
        "description": "验证 PIN 码",
        "operationId": "verify_pin_code_api_pin_verify_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PinVerifyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/pin/change": {
      "post": {
        "tags": [
          "authentication",
          "authentication"
        ],
        "summary": "Change Pin",
        "description": "修改 PIN 码",
        "operationId": "change_pin_api_pin_change_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PinChangeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/pin/lock": {
      "post": {
        "tags": [
          "authentication",
          "authentication"
        ],
        "summary": "Lock App",
        "description": "锁定应用",
        "operationId": "lock_app_api_pin_lock_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/pin/status": {
      "get": {
        "tags": [
          "authentication",
          "authentication"
        ],
        "summary": "Get Pin Status",
        "description": "获取 PIN 状态",
        "operationId": "get_pin_status_api_pin_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/systems": {
      "get": {
        "tags": [
          "systems",
          "systems"
        ],
        "summary": "Get Systems",
        "description": "获取所有系统列表",
        "operationId": "get_systems_api_systems_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "score",
              "title": "Sort By"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "default": "desc",
              "title": "Sort Order"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/systems/{system_type}": {
      "get": {
        "tags": [
          "systems",
          "systems"
        ],
        "summary": "Get System Detail",
        "description": "获取系统详情",
        "operationId": "get_system_detail_api_systems__system_type__get",
        "parameters": [
          {
            "name": "system_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "System Type"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/systems/{system_type}/score": {
      "patch": {
        "tags": [
          "systems",
          "systems"
        ],
        "summary": "Update System Score",
        "description": "更新系统评分",
        "operationId": "update_system_score_api_systems__system_type__score_patch",
        "parameters": [
          {
            "name": "system_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "System Type"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SystemScoreUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/systems/{system_type}/logs": {
      "post": {
        "tags": [
          "systems",
          "systems"
        ],
        "summary": "Create System Log",
        "description": "添加日志",
        "operationId": "create_system_log_api_systems__system_type__logs_post",
        "parameters": [
          {
            "name": "system_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "System Type"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SystemLogCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "systems",
          "systems"
        ],
        "summary": "Get System Logs",
        "description": "获取日志列表",
        "operationId": "get_system_logs_api_systems__system_type__logs_get",
        "parameters": [
          {
            "name": "system_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "System Type"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "created_at",
              "title": "Sort By"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "default": "desc",
              "title": "Sort Order"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/systems/{system_type}/actions": {
      "post": {
        "tags": [
          "systems",
          "systems"
        ],
        "summary": "Create System Action",
        "description": "添加行动项",
        "operationId": "create_system_action_api_systems__system_type__actions_post",
        "parameters": [
          {
            "name": "system_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "System Type"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SystemActionCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/systems/{system_type}/actions/{action_id}": {
      "patch": {
        "tags": [
          "systems",
          "systems"
        ],
        "summary": "Update System Action",
        "description": "更新行动项",
        "operationId": "update_system_action_api_systems__system_type__actions__action_id__patch",
        "parameters": [
          {
            "name": "system_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "System Type"
            }
          },
          {
            "name": "action_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Action Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SystemActionUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "systems",
          "systems"
        ],
        "summary": "Delete System Action",
        "description": "删除行动项",
        "operationId": "delete_system_action_api_systems__system_type__actions__action_id__delete",
        "parameters": [
          {
            "name": "system_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "System Type"
            }
          },
          {
            "name": "action_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Action Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/user/profile": {
      "get": {
        "tags": [
          "users",
          "user"
        ],
        "summary": "Get User Profile",
        "description": "获取用户信息",
        "operationId": "get_user_profile_api_user_profile_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "users",
          "user"
        ],
        "summary": "Update User Profile",
        "description": "更新用户信息",
        "operationId": "update_user_profile_api_user_profile_patch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/user/settings": {
      "get": {
        "tags": [
          "users",
          "user"
        ],
        "summary": "Get User Settings",
        "description": "获取用户设置",
        "operationId": "get_user_settings_api_user_settings_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "users",
          "user"
        ],
        "summary": "Update User Settings",
        "description": "更新用户设置",
        "operationId": "update_user_settings_api_user_settings_patch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserSettingsUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/user/ai-config": {
      "get": {
        "tags": [
          "users",
          "user"
        ],
        "summary": "Get Ai Config",
        "description": "获取 AI 配置（不返回完整 API Key）",
        "operationId": "get_ai_config_api_user_ai_config_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "users",
          "user"
        ],
        "summary": "Save Ai Config",
        "description": "保存 AI 配置",
        "operationId": "save_ai_config_api_user_ai_config_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AIConfigBase"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/journal": {
      "post": {
        "tags": [
          "journals",
          "journals"
        ],
        "summary": "Create Diary",
        "description": "创建日记",
        "operationId": "create_diary_api_journal_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiaryCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "journals",
          "journals"
        ],
        "summary": "Get Diaries",
        "description": "获取日记列表",
        "operationId": "get_diaries_api_journal_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          },
          {
            "name": "mood",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "enum": [
                    "great",
                    "good",
                    "neutral",
                    "bad",
                    "terrible"
                  ],
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Mood"
            }
          },
          {
            "name": "related_system",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Related System"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "created_at",
              "title": "Sort By"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "default": "desc",
              "title": "Sort Order"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/journal/{diary_id}": {
      "get": {
        "tags": [
          "journals",
          "journals"
        ],
        "summary": "Get Diary Detail",
        "description": "获取日记详情",
        "operationId": "get_diary_detail_api_journal__diary_id__get",
        "parameters": [
          {
            "name": "diary_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Diary Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "journals",
          "journals"
        ],
        "summary": "Update Diary",
        "description": "更新日记",
        "operationId": "update_diary_api_journal__diary_id__patch",
        "parameters": [
          {
            "name": "diary_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Diary Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiaryUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "journals",
          "journals"
        ],
        "summary": "Delete Diary",
        "description": "删除日记",
        "operationId": "delete_diary_api_journal__diary_id__delete",
        "parameters": [
          {
            "name": "diary_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Diary Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/insights/generate": {
      "post": {
        "tags": [
          "insights",
          "insights"
        ],
        "summary": "Generate Insight",
        "description": "生成洞察",
        "operationId": "generate_insight_api_insights_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InsightGenerateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/insights": {
      "get": {
        "tags": [
          "insights",
          "insights"
        ],
        "summary": "Get Insights",
        "description": "获取洞察历史",
        "operationId": "get_insights_api_insights_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 10,
              "title": "Page Size"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "generated_at",
              "title": "Sort By"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "default": "desc",
              "title": "Sort Order"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/insights/latest": {
      "get": {
        "tags": [
          "insights",
          "insights"
        ],
        "summary": "Get Latest Insight Endpoint",
        "description": "获取最新洞察",
        "operationId": "get_latest_insight_endpoint_api_insights_latest_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/data/export": {
      "post": {
        "tags": [
          "data-management",
          "data-management"
        ],
        "summary": "Export Data",
        "description": "导出数据\n\nArgs:\n    format: 导出格式 (json, zip)",
        "operationId": "export_data_api_data_export_post",
        "parameters": [
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "导出格式 (json, zip)",
              "default": "json",
              "title": "Format"
            },
            "description": "导出格式 (json, zip)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/data/import": {
      "post": {
        "tags": [
          "data-management",
          "data-management"
        ],
        "summary": "Import Data",
        "description": "导入数据\n\nArgs:\n    backup_path: 备份文件路径\n    verify: 是否验证备份文件",
        "operationId": "import_data_api_data_import_post",
        "parameters": [
          {
            "name": "backup_path",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Backup Path"
            }
          },
          {
            "name": "verify",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Verify"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/data/backups": {
      "get": {
        "tags": [
          "data-management",
          "data-management"
        ],
        "summary": "List Backups",
        "description": "列出所有备份",
        "operationId": "list_backups_api_data_backups_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/data/backup/create": {
      "post": {
        "tags": [
          "data-management",
          "data-management"
        ],
        "summary": "Create Backup",
        "description": "创建数据库备份",
        "operationId": "create_backup_api_data_backup_create_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/data/health": {
      "get": {
        "tags": [
          "data-management",
          "data-management"
        ],
        "summary": "Health Check",
        "description": "健康检查",
        "operationId": "health_check_api_data_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AIConfigBase": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "deepseek",
              "doubao",
              "openai"
            ],
            "title": "Provider"
          },
          "api_key": {
            "type": "string",
            "minLength": 1,
            "title": "Api Key",
            "description": "API Key"
          },
          "model_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Name",
            "description": "模型名称"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "api_key"
        ],
        "title": "AIConfigBase",
        "description": "AI 配置基础"
      },
      "DiaryCreate": {
        "properties": {
          "title": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Title",
            "description": "标题"
          },
          "content": {
            "type": "string",
            "minLength": 1,
            "title": "Content",
            "description": "内容"
          },
          "mood": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "great",
                  "good",
                  "neutral",
                  "bad",
                  "terrible"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Mood",
            "description": "心情"
          },
          "tags": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags",
            "description": "标签（JSON 数组字符串）"
          },
          "related_system": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Related System",
            "description": "关联系统类型"
          },
          "is_private": {
            "type": "boolean",
            "title": "Is Private",
            "description": "是否私密",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "title",
          "content"
        ],
        "title": "DiaryCreate",
        "description": "创建日记"
      },
      "DiaryUpdate": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "content": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "mood": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "great",
                  "good",
                  "neutral",
                  "bad",
                  "terrible"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Mood"
          },
          "tags": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags"
          },
          "related_system": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Related System"
          },
          "is_private": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Private"
          }
        },
        "type": "object",
        "title": "DiaryUpdate",
        "description": "更新日记（所有字段可选）"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "InsightGenerateRequest": {
        "properties": {
          "force": {
            "type": "boolean",
            "title": "Force",
            "description": "是否强制重新生成",
            "default": false
          }
        },
        "type": "object",
        "title": "InsightGenerateRequest",
        "description": "生成洞察请求"
      },
      "PinChangeRequest": {
        "properties": {
          "old_pin": {
            "type": "string",
            "pattern": "^\\d{6}$",
            "title": "Old Pin",
            "description": "旧 PIN 码"
          },
          "new_pin": {
            "type": "string",
            "pattern": "^\\d{6}$",
            "title": "New Pin",
            "description": "新 PIN 码"
          }
        },
        "type": "object",
        "required": [
          "old_pin",
          "new_pin"
        ],
        "title": "PinChangeRequest",
        "description": "修改 PIN 码请求"
      },
      "PinSetupRequest": {
        "properties": {
          "pin": {
            "type": "string",
            "pattern": "^\\d{6}$",
            "title": "Pin",
            "description": "6 位数字 PIN 码"
          }
        },
        "type": "object",
        "required": [
          "pin"
        ],
        "title": "PinSetupRequest",
        "description": "设置 PIN 码请求"
      },
      "PinVerifyRequest": {
        "properties": {
          "pin": {
            "type": "string",
            "pattern": "^\\d{6}$",
            "title": "Pin",
            "description": "6 位数字 PIN 码"
          }
        },
        "type": "object",
        "required": [
          "pin"
        ],
        "title": "PinVerifyRequest",
        "description": "验证 PIN 码请求"
      },
      "SystemActionCreate": {
        "properties": {
          "text": {
            "type": "string",
            "maxLength": 500,
            "title": "Text",
            "description": "行动项内容"
          },
          "completed": {
            "type": "boolean",
            "title": "Completed",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "text"
        ],
        "title": "SystemActionCreate",
        "description": "创建系统行动项"
      },
      "SystemActionUpdate": {
        "properties": {
          "text": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Text"
          },
          "completed": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed"
          }
        },
        "type": "object",
        "title": "SystemActionUpdate",
        "description": "更新系统行动项"
      },
      "SystemLogCreate": {
        "properties": {
          "label": {
            "type": "string",
            "maxLength": 100,
            "title": "Label",
            "description": "日志标签"
          },
          "value": {
            "type": "string",
            "title": "Value",
            "description": "日志内容"
          },
          "meta_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Meta Data",
            "description": "额外元数据"
          }
        },
        "type": "object",
        "required": [
          "label",
          "value"
        ],
        "title": "SystemLogCreate",
        "description": "创建系统日志"
      },
      "SystemScoreUpdate": {
        "properties": {
          "score": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Score"
          }
        },
        "type": "object",
        "required": [
          "score"
        ],
        "title": "SystemScoreUpdate",
        "description": "更新系统评分"
      },
      "UserSettingsUpdate": {
        "properties": {
          "theme": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "light",
                  "dark",
                  "auto"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Theme"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Language"
          },
          "auto_save_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Save Enabled"
          },
          "auto_save_interval": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 600.0,
                "minimum": 10.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Save Interval"
          },
          "notification_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notification Enabled"
          },
          "notification_time": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^\\d{2}:\\d{2}$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notification Time"
          },
          "show_year_progress": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Show Year Progress"
          },
          "show_weekday": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Show Weekday"
          }
        },
        "type": "object",
        "title": "UserSettingsUpdate",
        "description": "更新用户设置（所有字段可选）"
      },
      "UserUpdate": {
        "properties": {
          "display_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "birthday": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Birthday",
            "description": "生日字符串 YYYY-MM-DD"
          },
          "mbti": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 4,
                "minLength": 4
              },
              {
                "type": "null"
              }
            ],
            "title": "Mbti"
          },
          "values": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Values"
          },
          "life_expectancy": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 120.0,
                "minimum": 50.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Life Expectancy"
          }
        },
        "type": "object",
        "title": "UserUpdate",
        "description": "更新用户信息（所有字段可选）"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  },
  "servers": [
    {
      "url": "http://127.0.0.1:8000",
      "description": "开发环境"
    }
  ],
  "tags": [
    {
      "name": "authentication",
      "description": "PIN 码认证相关接口",
      "x-displayName": "认证管理"
    },
    {
      "name": "systems",
      "description": "八维系统管理接口",
      "x-displayName": "系统管理"
    },
    {
      "name": "users",
      "description": "用户配置管理接口",
      "x-displayName": "用户配置"
    },
    {
      "name": "journals",
      "description": "日记管理接口",
      "x-displayName": "日记管理"
    },
    {
      "name": "insights",
      "description": "AI 洞察生成接口",
      "x-displayName": "AI 洞察"
    },
    {
      "name": "data-management",
      "description": "数据管理接口（备份、恢复、导出、导入）",
      "x-displayName": "数据管理"
    },
    {
      "name": "health",
      "description": "健康检查接口",
      "x-displayName": "健康检查"
    }
  ]
}